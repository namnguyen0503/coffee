html {
    user-select: none;
    
}

#cancel-btn {
    background-color: #ff4d4d;
    border-color: #ff4d4d;
    margin-bottom: 10px;
}

/* --- 1. Tút lại cái Card (Khung sản phẩm) --- */
.product-item {
    border: none !important; /* Bỏ viền xám mặc định của Bootstrap */
    border-radius: 20px !important; /* Bo tròn mềm mại hơn */
    background: white;
    box-shadow: 0 10px 20px rgba(0,0,0,0.05); /* Đổ bóng nhẹ tạo chiều sâu */
    transition: all 0.3s ease; /* Hiệu ứng mượt mà */
    overflow: hidden; /* Để ảnh không bị trồi ra khỏi bo góc */
    height: 100%; /* Đảm bảo các thẻ bằng nhau */
    position: relative;
}

/* Hiệu ứng khi di chuột vào món */
.product-item:hover {
    transform: translateY(-5px); /* Nhấc nhẹ thẻ lên */
    box-shadow: 0 15px 30px rgba(111, 78, 55, 0.2); /* Bóng màu nâu cafe */
    border: 1px solid var(--primary-color) !important;
}

/* --- 2. Sửa lại Ảnh (Quan trọng nhất) --- */
.card-img-top {
    width: 100%;
    height: 180px; /* Tăng chiều cao lên (cũ chắc tầm 120px) để thấy hết ly nước */
    object-fit: cover; /* Cực quan trọng: Giúp ảnh lấp đầy khung mà không bị méo */
    object-position: center; /* Luôn lấy trung tâm bức ảnh */
    border-bottom: 1px solid #f0f0f0; /* Đường viền mờ ngăn cách với phần chữ */
    transition: transform 0.5s ease;
}

/* Zoom nhẹ ảnh khi hover tạo cảm giác tương tác */
.product-item:hover .card-img-top {
    transform: scale(1.05);
}

/* --- 3. Phần Chữ & Giá --- */
.card-body {
    padding: 15px !important;
    text-align: center;
    background: #fff;
}

.card-title {
    font-size: 1rem;
    font-weight: 700; /* In đậm tên món */
    color: #333;
    margin-bottom: 8px;
    white-space: nowrap; 
    overflow: hidden;
    text-overflow: ellipsis; /* Nếu tên dài quá thì hiện dấu ... */
}

/* Giá tiền phong cách "Tag" */
.price-tag {
    display: inline-block;
    color: #6f4e37; /* Màu nâu chủ đạo */
    font-weight: 800;
    font-size: 1.1rem;
    background: #f4f1ea; /* Nền màu be nhạt */
    padding: 5px 15px;
    border-radius: 15px;
}

/* --- 4. Badge "Tạm hết" (Nếu có) --- */
.badge-stock {
    z-index: 10;
    top: 15px;
    right: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* Tạo nút cộng ảo */
.product-item::after {
    content: '+';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0); /* Mặc định ẩn (thu nhỏ) */
    width: 50px;
    height: 50px;
    background: rgba(111, 78, 55, 0.9); /* Màu nâu cafe trong suốt */
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: bold;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    pointer-events: none; /* Để click xuyên qua vào thẻ card */
    z-index: 5;
}

/* Khi hover thì hiện nút cộng lên */
.product-item:hover::after {
    transform: translate(-50%, -50%) scale(1);
    top: 40%; /* Đẩy lên phần ảnh chút */
}

/* --- 1. Khung thẻ (Card) - Dáng cao --- */
.product-item {
    border: none !important;
    border-radius: 20px !important;
    background: white;
    /* Bóng đổ nhẹ hơn để nhìn hiện đại */
    box-shadow: 0 5px 15px rgba(0,0,0,0.03); 
    transition: all 0.3s ease;
    overflow: hidden;
    height: 100%; 
    display: flex;       /* Dùng flex để chia dọc */
    flex-direction: column; 
}

.product-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(111, 78, 55, 0.15);
    border: 1px solid var(--primary-color) !important;
}

/* --- 2. Ảnh sản phẩm (QUAN TRỌNG NHẤT) --- */
.card-img-top {
    width: 100%;
    /* TĂNG CHIỀU CAO: Trước đây là 120-140px, giờ lên 220px */
    height: 300px !important; 
    
    /* object-fit: cover giúp ảnh lấp đầy khung mà không bị méo */
    object-fit: cover; 
    
    /* Canh giữa ảnh để luôn lấy được phần trung tâm của ly nước */
    object-position: center center; 
    
    border-bottom: 1px solid #f8f9fa;
    transition: transform 0.5s ease;
}

/* Hiệu ứng zoom nhẹ khi di chuột */
.product-item:hover .card-img-top {
    transform: scale(1.08); /* Zoom nhẹ hơn chút để đỡ chóng mặt */
}

/* --- 3. Phần thông tin bên dưới (Gọn gàng lại) --- */
.card-body {
    padding: 12px 10px !important; /* Thu nhỏ padding để dành đất cho ảnh */
    text-align: center;
    background: #fff;
    flex-grow: 1; /* Đẩy phần này xuống đáy */
    display: flex;
    flex-direction: column;
    justify-content: center; /* Căn giữa nội dung dọc */
}

.card-title {
    font-size: 1rem;
    font-weight: 700;
    color: #4a4a4a;
    margin-bottom: 8px;
    /* Giới hạn tên món 2 dòng, nếu dài quá thì ... */
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.3;
}

.price-tag {
    display: inline-block;
    color: #6f4e37;
    font-weight: 800;
    font-size: 1.15rem;
}

/* --- 4. Badge "Tạm hết" --- */
.badge-stock {
    position: absolute;
    top: 10px;
    left: 10px; /* Đổi sang trái nhìn cho giống ShopeeFood */
    background: rgba(220, 53, 69, 0.9);
    color: white;
    padding: 4px 10px;
    border-radius: 8px;
    font-size: 0.75rem;
    font-weight: bold;
    z-index: 10;
    backdrop-filter: blur(2px);
}

/* --- CẬP NHẬT CSS CHO CHẾ ĐỘ 6 MÓN/HÀNG --- */

.card-img-top {
    width: 100%;
    /* Giảm chiều cao xuống chút vì bề ngang thẻ đã bé lại */
    /* Nếu để 220px như cũ nhìn sẽ bị dài ngoằng như cái thước kẻ */
    height: 400px !important; 
    object-fit: fill; 
    object-position: center bottom; /* Lấy phần đáy ly nước cho đẹp */
    border-bottom: 1px solid #f8f9fa;
}

.card-body {
    padding: 8px 4px !important; /* Giảm padding để tận dụng không gian */
}

.card-title {
    font-size: 0.85rem; /* Giảm font chữ tên món xuống */
    font-weight: 700;
    margin-bottom: 4px;
    height: 2.4em; /* Cố định chiều cao tên món (khoảng 2 dòng) */
    line-height: 1.2;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.price-tag {
    font-size: 1rem; /* Giảm font giá tiền một chút */
    padding: 2px 10px;
}

/* Chỉnh lại nút badge "Tạm hết" cho nhỏ lại */
.badge-stock {
    font-size: 0.65rem;
    padding: 3px 6px;
}

/* Tắt mũi tên tăng giảm mặc định xấu xí của input number trên trình duyệt */
.quantity-input::-webkit-outer-spin-button,
.quantity-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Firefox */
.quantity-input {
  -moz-appearance: textfield;
  border: 1px solid #ced4da;
  color: var(--primary-color);
}

.quantity-input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 0.2rem rgba(111, 78, 55, 0.25);
}

.stock-remaining {
    position: absolute;
    top: 10px;
    right: 10px; /* Đặt bên phải */
    background: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.75rem;
    font-weight: bold;
    z-index: 20;
    backdrop-filter: blur(2px);
    transition: background 0.3s;
}

/* Khi sắp hết hàng (còn < 5) thì đổi màu đỏ */
.stock-remaining.low-stock {
    background: rgba(220, 53, 69, 0.9);
    animation: pulse 2s infinite;
}

/* Class disabled khi hết nguyên liệu (Ghi đè class cũ) */
.product-item.out-of-stock-material {
    opacity: 0.5;
    pointer-events: none; /* Không cho click */
    filter: grayscale(1);
}
/* Thêm vào phần style của bạn */
.product-item {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); /* Hiệu ứng mượt */
}

.product-item.out-of-stock-material {
    opacity: 0.4;
    filter: grayscale(1) blur(1px);
    transform: scale(0.96); /* Hiệu ứng thu nhỏ nhẹ khi hết hàng */
    pointer-events: none;
}

/* Hiệu ứng rung nhẹ khi nhập quá số lượng cho phép */
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}
.input-error {
    animation: shake 0.2s darkred;
    border-color: red !important;
}

/* =============================================================
   IN HÓA ĐƠN (GIAO DIỆN BILL NHIỆT CHUYÊN NGHIỆP)
   ============================================================= */

/* Style cho các đường kẻ đứt nét */
.dashed-line {
    border-top: 1px dashed #000;
    width: 100%;
    height: 1px;
    display: block;
}

/* Style hiển thị trên màn hình (để xem trước nếu cần) */
#invoice-pos {
    background: #fff;
    width: 100%;
    max-width: 350px; /* Giới hạn chiều rộng giống tờ bill thật */
    margin: 0 auto;
    color: #000;
    font-family: 'Courier New', Courier, monospace; /* Font giống máy in */
}

/* --- CẤU HÌNH KHI IN --- */
@media print {
    /* 1. Thiết lập khổ giấy 80mm */
    @page { 
        margin: 0; 
        size: 80mm auto; 
    }

    /* 2. Ẩn tất cả mọi thứ */
    body { 
        visibility: hidden; 
        background: #fff;
        height: auto;
    }
    
    /* 3. Hiển thị và định vị hóa đơn */
    #invoice-pos {
        display: block !important;
        visibility: visible !important;
        position: absolute;
        left: 0;
        top: 0;
        width: 79mm; /* Nhỏ hơn 80mm một chút để không bị tràn lề */
        margin: 0;
        padding: 5mm 2mm; /* Padding nhỏ để tiết kiệm giấy */
        font-size: 11px; /* Cỡ chữ chuẩn cho máy in nhiệt */
        line-height: 1.2;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Hoặc dùng font monospace nếu thích */
    }

    /* Đảm bảo nội dung con hiển thị */
    #invoice-pos * {
        visibility: visible !important;
    }

    /* Tinh chỉnh các thành phần trong bill */
    .store-name { font-size: 16px !important; }
    .invoice-title { font-size: 14px !important; margin-top: 5px; margin-bottom: 5px; }
    .total-amount { font-size: 18px !important; }
    
    /* Ẩn các nút không cần thiết */
    .btn, .no-print, header, .sidebar, .filter-bar { 
        display: none !important; 
    }
    
    /* Canh chỉnh bảng */
    .receipt-table th, .receipt-table td {
        padding: 2px 0 !important; /* Thu gọn khoảng cách dòng */
    }
    
    /* In đậm header bảng */
    .receipt-table thead tr {
        border-bottom: 1px dashed #000 !important;
        border-top: 1px dashed #000 !important;
    }
}

/* =============================================================
   IN TEM DÁN CỐC (Sticker Style)
   ============================================================= */
@media print {
    /* Cho phép hiện cả Hóa đơn VÀ Tem */
    #sticker-container {
        display: block !important;
        visibility: visible !important;
        position: absolute;
        left: 0;
        /* Tem sẽ bắt đầu in sau khi hóa đơn kết thúc (nhờ flow tự nhiên của HTML) */
        top: 100%; 
        width: 72mm; /* Khổ 80mm trừ lề */
        padding: 0 2mm;
    }

    #sticker-container * {
        visibility: visible !important;
    }

    /* Thiết kế 1 con tem */
    .sticker-item {
        border: 2px solid #000; /* Viền đậm giống Mixue */
        border-radius: 5px;
        padding: 10px;
        margin-top: 15px; /* Cách tem trước ra */
        margin-bottom: 20px;
        page-break-inside: avoid; /* Không được cắt đôi con tem */
        page-break-after: always; /* In xong 1 tem thì cắt giấy/sang trang */
        font-family: 'Segoe UI', sans-serif;
        display: flex;
        flex-direction: column;
    }

    .sticker-header {
        display: flex;
        justify-content: space-between;
        border-bottom: 1px solid #000;
        padding-bottom: 5px;
        margin-bottom: 5px;
        font-size: 12px;
        font-weight: bold;
    }

    .sticker-product {
        font-size: 24px; /* Tên món siêu to */
        font-weight: 900;
        line-height: 1.1;
        margin-bottom: 5px;
        text-transform: uppercase;
    }

    .sticker-note {
        font-size: 16px;
        font-weight: bold;
        background: #000;
        color: #fff; /* Chữ trắng nền đen cho nổi bật ghi chú */
        padding: 2px 5px;
        display: inline-block;
        border-radius: 3px;
    }

    .sticker-footer {
        margin-top: 10px;
        border-top: 1px dashed #000;
        padding-top: 5px;
        font-size: 11px;
        text-align: center;
    }
}




/* =============================================================
   CẤU HÌNH IN ẤN (FIX LỖI FONT & TÁCH TRANG TUYỆT ĐỐI)
   ============================================================= */

/* 1. Reset khổ giấy chung */
@page {
    margin: 0;
    size: auto; 
}

/* 2. Ẩn mặc định trên màn hình web */
#invoice-pos, #sticker-container { display: none; }

/* 3. Logic in ấn */
@media print {
    /* Ẩn TOÀN BỘ giao diện web (Menu, Sidebar...) */
    body > *:not(#invoice-pos):not(#sticker-container) {
        display: none !important;
    }

    body {
        margin: 0; padding: 0; background: #fff; height: auto;
        /* FIX LỖI FONT TIẾNG VIỆT: Dùng Arial là an toàn nhất */
        font-family: 'Arial', sans-serif !important; 
    }

    /* === MODE 1: IN HÓA ĐƠN (BILL) === */
    /* Khi Body có class 'print-mode-bill': Hiện Bill, Ẩn Sticker */
    body.print-mode-bill #invoice-pos {
        display: block !important;
        position: absolute; left: 0; top: 0;
        width: 72mm; /* Khổ 80mm */
        z-index: 999;
    }

    /* QUAN TRỌNG: Ẩn Sticker tuyệt đối khi đang in Bill */
    body.print-mode-bill #sticker-container {
        display: none !important;
    }

    /* === MODE 2: IN TEM (STICKER) === */
    /* Khi Body có class 'print-mode-sticker': Ẩn Bill, Hiện Sticker */
    body.print-mode-sticker #sticker-container {
        display: block !important;
        position: absolute; left: 0; top: 0;
        width: 50mm; /* Khổ Tem */
        z-index: 999;
    }

    /* QUAN TRỌNG: Ẩn Bill tuyệt đối khi đang in Sticker */
    body.print-mode-sticker #invoice-pos {
        display: none !important;
    }

    /* --- STYLE CHI TIẾT --- */
    
    /* 1. Hóa đơn */
    #invoice-pos * { font-family: 'Arial', sans-serif !important; }
    .store-name { font-weight: 900; text-transform: uppercase; }
    
    /* Ép font toàn cục khi in */
    * {
        font-family: Arial, Helvetica, sans-serif !important;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }

    /* Style riêng cho Sticker để không bị mảnh chữ */
    .sticker-item {
        border: 2px solid #000;
        border-radius: 4px;
        padding: 5px;
        margin-bottom: 5px;
        page-break-after: always;
        page-break-inside: avoid;
        display: flex;
        flex-direction: column;
        background: #fff;
        color: #000;
    }

    .sticker-product {
        /* Dùng font-weight 700 thay vì 900 để tránh bị lem font tiếng Việt */
        font-weight: 700 !important;
        font-size: 18px; 
        line-height: 1.2;
        margin: 5px 0;
        text-transform: uppercase;
        text-align: center;
        /* Khử răng cưa cho chữ to */
        -webkit-transform: translateZ(0);
    }

    .sticker-note {
        font-size: 13px;
        font-weight: 700 !important;
        /* THAY ĐỔI: Không dùng nền đen chữ trắng nữa vì nó là nguyên nhân gây mảnh chữ trên máy in nhiệt */
        /* Thay bằng khung viền đen chữ đen cho an toàn */
        border: 1px solid #000;
        color: #000 !important;
        background: #fff !important;
        text-align: center;
        padding: 4px;
        border-radius: 2px;
        margin-top: 5px;
        text-transform: none;
    }

    .sticker-header, .sticker-footer {
        font-family: Arial, sans-serif !important;
        font-size: 10px;
    }
}

@media print {
    /* ... giữ các code cũ ... */

    /* --- TÙY CHỈNH PHẦN TỔNG TIỀN (FOOTER HÓA ĐƠN) --- */
    
    /* 1. Khung chứa toàn bộ phần tổng tiền */
    #print-total {
        width: 100%;
        margin-top: 5px;
        border-top: 1px dashed #000; /* Đường kẻ ngăn cách với danh sách món */
        padding-top: 5px;
    }

    /* 2. Một dòng thông tin (VD: Tổng tiền.... 100k) */
    .bill-row {
        display: flex;
        justify-content: space-between; /* Đẩy chữ sang 2 mép trái phải */
        align-items: center;
        
        /* === [CHỈNH KHOẢNG CÁCH GIỮA CÁC DÒNG Ở ĐÂY] === */
        margin-bottom: 2px; /* Tăng giảm số này để các dòng xa/gần nhau */
        /* ================================================= */
        
        font-size: 11px; /* Cỡ chữ mặc định */
        width: 100%;
    }

    /* 3. Dòng Thành Tiền (To và Đậm hơn) */
    .bill-row.final {
        margin-top: 5px; /* Cách xa mấy dòng trên một chút cho thoáng */
        font-size: 14px; /* Chữ to hơn */
        font-weight: bold;
        border-top: 1px solid #000; /* Thêm đường kẻ liền cho chốt hạ */
        padding-top: 5px;
    }

    /* Nếu tên nhãn quá dài (VD: "Tổng tiền hàng hóa..."), 
       nó sẽ tự co lại để ưu tiên hiển thị số tiền */
    .bill-label {
        white-space: nowrap; /* Không cho xuống dòng */
    }
}

.fa-qrcode {
    color:#000;
}